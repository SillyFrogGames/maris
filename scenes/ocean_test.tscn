[gd_scene load_steps=10 format=3 uid="uid://cuohn27yrj123"]

[ext_resource type="Shader" uid="uid://dy8v0yisrw5l2" path="res://addons/Maris/shaders/water_ocean.gdshader" id="1_xmqnr"]
[ext_resource type="Script" uid="uid://bv1gu22rlvn1q" path="res://addons/Maris/scripts/ocean_surface_3d.gd" id="2_sg21o"]
[ext_resource type="RDShaderFile" uid="uid://o405xkxpc1lr" path="res://addons/Maris/shaders/fft_butterfly.glsl" id="3_dfknr"]
[ext_resource type="Script" uid="uid://duwhkjw8p35h4" path="res://addons/Maris/scripts/buoyant_body_3d.gd" id="4_5hhq6"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_h62pp"]

[sub_resource type="Sky" id="Sky_47btn"]
sky_material = SubResource("ProceduralSkyMaterial_h62pp")

[sub_resource type="Environment" id="Environment_ia0ad"]
background_mode = 2
sky = SubResource("Sky_47btn")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_nd08f"]
render_priority = 0
shader = ExtResource("1_xmqnr")
shader_parameter/albedo = Color(1, 1, 1, 1)
shader_parameter/albedo_texture_size = Vector2i(0, 0)
shader_parameter/point_size = 0.0
shader_parameter/roughness = 0.0
shader_parameter/metallic_texture_channel = Vector4(0, 0, 0, 0)
shader_parameter/specular = 0.0
shader_parameter/metallic = 0.0
shader_parameter/uv1_scale = Vector3(0, 0, 0)
shader_parameter/uv1_offset = Vector3(0, 0, 0)
shader_parameter/uv2_scale = Vector3(0, 0, 0)
shader_parameter/uv2_offset = Vector3(0, 0, 0)
shader_parameter/min_height = -2.0
shader_parameter/max_height = 2.0
shader_parameter/deep_color = Color(3.3691526e-07, 0.19617271, 0.31493026, 1)
shader_parameter/high_color = Color(0.16604331, 0.40173817, 0.43977237, 1)
shader_parameter/foam_color = Color(1, 1, 1, 1)
shader_parameter/min_alpha = 0.5
shader_parameter/max_alpha = 0.9

[sub_resource type="ArrayMesh" id="ArrayMesh_i1fb6"]

[node name="OceanCPUTest" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_ia0ad")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.9982502, -0.051289227, 0.029428322, 0, 0.49767044, 0.8673662, -0.059132148, -0.8658485, 0.49679962, 0, 3.16109, 0)

[node name="Water" type="MeshInstance3D" parent="."]
material_override = SubResource("ShaderMaterial_nd08f")
cast_shadow = 0
mesh = SubResource("ArrayMesh_i1fb6")
script = ExtResource("2_sg21o")
N = 32
L = 100.0
A = 10.0
wind_vel = Vector2(50, 10)
mesh_instance_path = NodePath(".")
fft_butterfly_shader = ExtResource("3_dfknr")

[node name="Objects" type="Node3D" parent="."]

[node name="Camera3D" type="Camera3D" parent="Objects"]
transform = Transform3D(-4.371139e-08, -0.76604444, 0.64278764, 0, 0.64278764, 0.76604444, -1, 3.3484866e-08, -2.809714e-08, 12.609227, 12.834762, 0)

[node name="Ship" type="RigidBody3D" parent="Objects"]
mass = 100000.0
script = ExtResource("4_5hhq6")
damping = 500.0
voxel_size = 1.0
metadata/_custom_type_script = "uid://duwhkjw8p35h4"

[node name="Mesh" type="CSGCombiner3D" parent="Objects/Ship"]
use_collision = true

[node name="Deck" type="CSGBox3D" parent="Objects/Ship/Mesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
size = Vector3(10, 2, 5)

[node name="Back" type="CSGPolygon3D" parent="Objects/Ship/Mesh"]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 5, 0, 0)
polygon = PackedVector2Array(2.5, -0.5, 2.5, 1.5, 0, 1.5, 0, -2.5, 1.5, -2)
mode = 1
spin_degrees = 180.0
spin_sides = 8

[node name="Front" type="CSGPolygon3D" parent="Objects/Ship/Mesh"]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, -5, 0, 0)
polygon = PackedVector2Array(2.5, -0.5, 2.5, 1.5, 0, 1.5, 0, -2.5, 1.5, -2)
mode = 1
spin_degrees = 180.0
spin_sides = 8

[node name="Hull" type="CSGPolygon3D" parent="Objects/Ship/Mesh"]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 5, -1.5, 0.5)
polygon = PackedVector2Array(-1, -0.5, -2, 1, 3, 1, 2, -0.5, 0.5, -1)
depth = 10.0
